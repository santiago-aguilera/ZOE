{% extends 'Layout.html' %}
{% block content %}
<style>
/* Fondo general */
.profes-container {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #4f46e5, #9333ea, #ec4899);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 3rem 1rem;
  color: #fff;
}

/* Tarjeta principal */
.profes-card {
  background: rgba(255, 255, 255, 0.08);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  padding: 2rem;
  border-radius: 20px;
  width: 100%;
  max-width: 900px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.25);
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.2);
  animation: fadeIn 1s ease;
}

/* Animación */
@keyframes fadeIn {
  from {opacity: 0; transform: translateY(20px);}
  to {opacity: 1; transform: translateY(0);}
}

/*  Títulos */
.profes-card h1 {
  font-size: 2.5rem;
  font-weight: 700;
  background: linear-gradient(to right, #f9a8d4, #fcd34d);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  margin-bottom: 0.5rem;
}

.profes-card p {
  color: #e0e7ff;
  margin-bottom: 2rem;
}

/* Barra de búsqueda */
.search-bar {
  display: flex;
  justify-content: center;
  margin-bottom: 2rem;
  gap: 0.5rem;
}

.search-bar input {
  flex: 1;
  padding: 0.8rem 1rem;
  border-radius: 10px;
  outline: none;
  border: 2px solid #9333ea;
  background: rgba(255, 255, 255, 0.9);
  color: #111;
  font-size: 1rem;
  transition: 0.3s;
}

.search-bar input:focus {
  border-color: #facc15;
  box-shadow: 0 0 10px rgba(250, 204, 21, 0.4);
}

.search-bar button {
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 10px;
  background: linear-gradient(to right, #facc15, #fbbf24);
  color: #111;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

.search-bar button:hover {
  background: linear-gradient(to right, #fde047, #facc15);
  transform: translateY(-2px);
}

/*  Grid profesores */
.profes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1.5rem;
}

/* Tarjetas */
.card {
  background: rgba(255, 255, 255, 0.15);
  padding: 1.5rem;
  border-radius: 14px;
  text-align: center;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  transition: transform 0.3s, background 0.3s;
  border: 1px solid rgba(255,255,255,0.2);
}

.card:hover {
  transform: translateY(-6px);
  background: rgba(255, 255, 255, 0.25);
}

.card h3 {
  color: #fff;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.card p {
  color: #e0e7ff;
  margin: 0.3rem 0;
}

/* Botón de chat */
.contact-btn {
  margin-top: 0.8rem;
  display: inline-block;
  background: linear-gradient(to right, #f9a8d4, #fcd34d);
  color: #111;
  font-weight: bold;
  border: none;
  border-radius: 10px;
  padding: 0.6rem 1rem;
  cursor: pointer;
  transition: all 0.3s;
}
.contact-btn:hover {
  transform: scale(1.05);
  background: linear-gradient(to right, #fde047, #f9a8d4);
}

/* Popup de chat */
.chat-popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  justify-content: center;
  align-items: center;
}

.chat-box {
  background: #1f1b2e;
  border-radius: 15px;
  padding: 2rem;
  max-width: 400px;
  width: 90%;
  color: #fff;
  text-align: left;
  animation: fadeIn 0.3s ease;
}

.chat-box h3 {
  background: linear-gradient(to right, #f9a8d4, #fcd34d);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.chat-box input, .chat-box textarea {
  width: 100%;
  background: rgba(255,255,255,0.1);
  border: none;
  border-radius: 8px;
  padding: 0.7rem;
  color: #fff;
  margin-top: 0.5rem;
}

.chat-box button {
  background: linear-gradient(to right, #f9a8d4, #fcd34d);
  border: none;
  color: #111;
  font-weight: bold;
  padding: 0.7rem 1.2rem;
  border-radius: 10px;
  margin-top: 1rem;
  cursor: pointer;
  transition: 0.3s;
}

.chat-box button:hover {
  transform: translateY(-2px);
}

.close-chat {
  float: right;
  cursor: pointer;
  font-weight: bold;
  color: #f9a8d4;
  font-size: 1.2rem;
}
</style>

<main class="profes-container">
  <section class="profes-card">
    <h1>Profesores IB</h1>
    <p>Consulta la información de los docentes del Bachillerato Internacional y comunícate con ellos.</p>

    <!-- Barra de búsqueda -->
    <div class="search-bar">
      <input id="searchInput" type="text" placeholder="Buscar profesor por nombre o asignatura...">
      <button onclick="searchTeachers()">Buscar</button>
    </div>

    <!-- Vista estudiante -->
    <div class="rol-section">
      <h2 class="text-2xl font-bold mb-4 bg-gradient-to-r from-pink-300 to-yellow-300 bg-clip-text text-transparent">Hola ...</h2>
      <div class="profes-grid" id="teacherList">
        <div class="card" data-name="Yolanda Hernandez" data-subject="Lengua y Literatura" data-email="yolanda.hernandez">
          <h3>Yolanda Hernández</h3>
          <p><strong>Lengua y Literatura</strong></p>
          <p>@yolanda.hernandez</p>
          <button class="contact-btn" onclick="openChat('Yolanda Hernández')">Chatear</button>
        </div>
        <div class="card" data-name="Fabian Tovar" data-subject="Matemáticas" data-email="fabian.tovar">
          <h3>Fabián Tovar</h3>
          <p><strong>Matemáticas</strong></p>
          <p>@fabian.tovar</p>
          <button class="contact-btn" onclick="openChat('Fabián Tovar')">Chatear</button>
        </div>
        <div class="card" data-name="Diana Quintero" data-subject="Historia" data-email="diana.quintero">
          <h3>Diana Quintero</h3>
          <p><strong>Historia</strong></p>
          <p>@diana.quintero</p>
          <button class="contact-btn" onclick="openChat('Diana Quintero')">Chatear</button>
        </div>
        <div class="card" data-name="Andres Salazar" data-subject="Aprendizaje y Servicio" data-email="andres.salazar">
          <h3>Andrés Salazar</h3>
          <p><strong>Aprendizaje y Servicio</strong></p>
          <p>@andres.salazar</p>
          <button class="contact-btn" onclick="openChat('Andrés Salazar')">Chatear</button>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- Ventana emergente de chat -->
<div class="chat-popup" id="chatPopup">
  <div class="chat-box">
    <span class="close-chat" onclick="closeChat()">×</span>
    <h3 id="chatTeacher">Chatear con Profesor</h3>
    <p class="text-sm opacity-80 mb-2">Escribe un mensaje y recibirás una respuesta al correo institucional.</p>
    <input type="text" placeholder="Tu nombre...">
    <textarea rows="3" placeholder="Escribe tu mensaje..."></textarea>
    <button onclick="closeChat()">Enviar mensaje</button>
  </div>
</div>

<script>
function searchTeachers() {
  const input = document.getElementById('searchInput').value.toLowerCase();
  const cards = document.querySelectorAll('.card');
  let found = false;

  cards.forEach(card => {
    const name = card.dataset.name.toLowerCase();
    const subject = card.dataset.subject.toLowerCase();
    if (name.includes(input) || subject.includes(input)) {
      card.style.display = 'block';
      found = true;
    } else {
      card.style.display = 'none';
    }
  });

  document.getElementById('noResults').style.display = found ? 'none' : 'block';
}

// Abrir popup
function openChat(name) {
  document.getElementById('chatPopup').style.display = 'flex';
  document.getElementById('chatTeacher').innerText = `Chatear con ${name}`;
}

// Cerrar popup
function closeChat() {
  document.getElementById('chatPopup').style.display = 'none';
}
</script>
{% endblock %}
